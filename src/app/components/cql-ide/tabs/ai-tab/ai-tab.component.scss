// AI Tab Container
:host {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.ai-tab-container {
  background-color: #ffffff;
  display: flex;
  flex-direction: column;
  height: 100%;
  
  // Fixed Toolbar
  .ai-toolbar {
    position: sticky;
    top: 0;
    z-index: 1000;
    background-color: #212529;
    border-bottom: 1px solid #495057;
    min-height: 48px;
    flex-shrink: 0; // Prevent toolbar from shrinking
    
    .dropdown-menu {
      background-color: #212529;
      border: 1px solid #495057;
      
      .dropdown-item {
        color: #ffffff;
        
        &:hover {
          background-color: #495057;
          color: #ffffff;
        }
      }
    }
  }
  
  // Main Chat Area
  .ai-chat-area {
    // Bootstrap flex-fill handles the flex: 1
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0; // Allow flex item to shrink below content size
    
    // Messages Output Area
    .messages-output {
      overflow-y: auto;
      overflow-x: hidden;
      background-color: #ffffff;
      flex: 1;
      padding-bottom: 0;
      
      // Auto-scroll to bottom
      scroll-behavior: smooth;
      
      // Message styles
      .message {
        .message-avatar {
          width: 32px;
          height: 32px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 14px;
          flex-shrink: 0;
          margin-top: 4px;
        }
        
        &.user-message {
          .message-avatar {
            background-color: #007bff;
            color: white;
          }
          
          .message-content {
            .message-body {
              background-color: #f8f9fa;
              border: 1px solid #e9ecef;
              border-radius: 12px 12px 4px 12px;
              padding: 12px 16px;
              margin-left: 8px;
            }
          }
        }
        
        &.assistant-message {
          .message-avatar {
            background-color: #28a745;
            color: white;
          }
          
          .message-content {
            .message-body {
              background-color: transparent;
              border: none;
              border-radius: 0;
              padding: 8px 0;
              margin-right: 0;
              width: 100%;
            }
          }
        }
      }
      
      // Code blocks
      .code-block {
        margin-top: 12px;
        
        pre {
          margin: 0;
          font-size: 0.875rem;
          line-height: 1.4;
        }
      }
      
      // Welcome message
      .welcome-message {
        height: 100%;
        background-color: #f8f9fa;
        
        .suggested-commands {
          .suggested-command-btn {
            max-width: 300px;
            white-space: normal;
            text-align: left;
            line-height: 1.3;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s ease;
            
            &:hover {
              transform: translateY(-1px);
              box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);
            }
          }
        }
      }
    }
    
    // Fixed Input Area
    .ai-input-area {
      position: sticky;
      bottom: 0;
      z-index: 1000;
      flex-shrink: 0;
      background-color: #ffffff;
      border-top: 1px solid #e9ecef;
      
      .input-group {
        .form-control {
          border-right: none;
          
          &:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
          }
        }
        
        .btn {
          border-left: none;
        }
      }
    }
  }
  
  // AI Not Available
  .ai-not-available {
    background-color: #f8f9fa;
    
    .connection-test {
      background-color: #ffffff;
      border: 1px solid #e9ecef;
    }
  }
}

// Streaming cursor animation
.streaming-cursor {
  span {
    animation: blink 1s infinite;
  }
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

// Dark theme support
@media (prefers-color-scheme: dark) {
  .ai-tab-container {
    background-color: #1a1a1a;
    
    .ai-toolbar {
      background-color: #2d2d2d;
      border-bottom-color: #404040;
    }
    
    .ai-chat-area {
      .messages-output {
        background-color: #1a1a1a;
        
        .message {
          &.user-message .message-content .message-body {
            background-color: #2d2d2d;
            color: #ffffff;
            border-color: #404040;
          }
          
          &.assistant-message .message-content .message-body {
            // background-color: #2d2d2d;
            color: #ffffff;
            border-color: #404040;
          }
        }
        
        .welcome-message {
          background-color: #1a1a1a;
        }
      }
      
      .ai-input-area {
        background-color: #2d2d2d;
        border-top-color: #404040;
        
        .form-control {
          background-color: #2d2d2d;
          border-color: #404040;
          color: #ffffff;
          
          &:focus {
            background-color: #2d2d2d;
            border-color: #007bff;
            color: #ffffff;
          }
        }
      }
    }
    
    .ai-not-available {
      background-color: #1a1a1a;
    }
  }
}

// Responsive design
@media (max-width: 768px) {
  .ai-tab-container {
    .ai-toolbar {
      .d-flex {
        flex-direction: column;
        gap: 8px;
      }
    }
    
    .ai-chat-area {
      .messages-output {
        padding: 16px 12px;
        
        .message {
          .message-avatar {
            width: 28px;
            height: 28px;
            font-size: 12px;
          }
          
          .message-content .message-body {
            padding: 8px 12px;
            font-size: 0.9rem;
          }
        }
      }
      
      .ai-input-area {
        padding: 12px;
        
        .input-group {
          .form-control {
            font-size: 0.9rem;
          }
        }
      }
    }
  }
}