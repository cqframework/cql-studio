<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h6 class="card-title mb-0">
          <i class="bi bi-check-circle me-1"></i>Validate Code
        </h6>
      </div>
      <div class="card-body">
        <div class="form-floating mb-3">
          <input type="text" class="form-control form-control-sm" id="validationCode" [(ngModel)]="validationCode"
            placeholder="e.g., 12345-6">
          <label for="validationCode">Code</label>
          <div class="form-text">The code to validate</div>
        </div>
        <div class="form-floating mb-3">
          <input type="url" class="form-control form-control-sm" id="validationSystem" [(ngModel)]="validationSystem"
            placeholder="e.g., http://loinc.org">
          <label for="validationSystem">Code System</label>
          <div class="form-text">The code system URL</div>
        </div>
        <div class="form-floating mb-3">
          <input type="url" class="form-control form-control-sm" id="validationValueSet" [(ngModel)]="validationValueSet"
            placeholder="e.g., http://hl7.org/fhir/ValueSet/example">
          <label for="validationValueSet">ValueSet URL (Optional)</label>
          <div class="form-text">Check if code is in specific ValueSet</div>
        </div>
        <button type="button" class="btn btn-primary btn-sm w-100" (click)="validateCode()"
          [disabled]="validationLoading() || !hasValidConfiguration()">
          @if (validationLoading()) {
          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          Validating...
          } @else {
          <i class="bi bi-check-circle me-2"></i>Validate Code
          }
        </button>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="bi bi-info-circle me-2"></i>Validation Result
        </h5>
      </div>
      <div class="card-body">
        @if (validationResult()) {
        <div class="alert" [class.alert-success]="validationResult()?.valid"
          [class.alert-danger]="!validationResult()?.valid" role="alert">
                <i class="bi me-2" [class.bi-check-circle]="validationResult()?.valid"
                  [class.bi-x-circle]="!validationResult()?.valid"></i>
          <strong>{{ validationResult()?.message }}</strong>
          @if (validationResult()?.display) {
          <div class="mt-2">
            <strong>Display:</strong> {{ validationResult()?.display }}
          </div>
          }
        </div>
        } @else {
        <div class="text-center text-muted py-4">
          <i class="bi bi-arrow-up display-4"></i>
          <p class="mt-2">Enter code details and click "Validate Code" to see results</p>
        </div>
        }
      </div>
    </div>
  </div>
</div>
